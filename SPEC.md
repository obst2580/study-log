# StudyLog - 학습 기록 애플리케이션 스펙

## 1. 프로젝트 개요

| 항목 | 내용 |
|------|------|
| **이름** | StudyLog |
| **목적** | 중·고등학생을 위한 간격 반복 기반 학습 기록 및 복습 관리 |
| **플랫폼** | Windows 데스크톱 (Electron) |
| **핵심 해결 과제** | 학습 이력 추적, 복습 타이밍 관리, 취약 부분 파악, 학습 효율 측정 |

## 2. 기술 스택

| 분류 | 기술 |
|------|------|
| **프레임워크** | React 19 + Vite + Electron |
| **언어** | TypeScript |
| **UI 라이브러리** | Ant Design 5 |
| **로컬 DB** | SQLite (better-sqlite3) |
| **클라우드 동기화** | Firebase (선택적) |
| **인증** | Google OAuth 2.0 (클라우드 동기화 시에만) |
| **LLM 연동** | OpenAI / Anthropic API (사용자 API 키 입력) |
| **차트** | Ant Design Charts 또는 Recharts |
| **검색** | SQLite FTS5 (Full-Text Search) |

## 3. 데이터 모델

### 3.1 계층 구조

```
Subject (과목)
  └─ Unit (단원)
       └─ Topic (토픽) = 칸반 카드 1장
            └─ ChecklistItem (세부 학습 항목)
```

### 3.2 카드 (Topic) 스키마

| 필드 | 타입 | 설명 |
|------|------|------|
| `id` | string (UUID) | 고유 식별자 |
| `subjectId` | string | 소속 과목 |
| `unitId` | string | 소속 단원 |
| `title` | string | 토픽명 (예: "이차방정식의 근의 공식") |
| `notes` | string (Markdown) | 자유 메모 (마크다운 지원) |
| `difficulty` | enum | 상 / 중 / 하 |
| `importance` | enum | 상 / 중 / 하 (시험 출제 빈도 등) |
| `tags` | string[] | 분류 태그 |
| `checklist` | ChecklistItem[] | 세부 학습 항목 체크리스트 |
| `links` | string[] | 참고 링크 (유튜브, 교재 페이지 등) |
| `column` | enum | 현재 칸반 컬럼 위치 |
| `studyTimeTotal` | number | 누적 학습 시간 (초) |
| `studySessions` | StudySession[] | 학습 세션 이력 |
| `reviewHistory` | ReviewEntry[] | 복습 이력 |
| `nextReviewAt` | datetime | 다음 복습 예정 시각 |
| `createdAt` | datetime | 생성일 |
| `updatedAt` | datetime | 최종 수정일 |

### 3.3 체크리스트 아이템

| 필드 | 타입 | 설명 |
|------|------|------|
| `id` | string | 고유 식별자 |
| `text` | string | 항목명 (예: "근의 공식 암기") |
| `checked` | boolean | 완료 여부 |

### 3.4 학습 세션

| 필드 | 타입 | 설명 |
|------|------|------|
| `id` | string | 고유 식별자 |
| `startedAt` | datetime | 시작 시각 |
| `endedAt` | datetime | 종료 시각 |
| `duration` | number | 학습 시간 (초) |
| `timerType` | enum | pomodoro / stopwatch |

### 3.5 복습 이력

| 필드 | 타입 | 설명 |
|------|------|------|
| `id` | string | 고유 식별자 |
| `reviewedAt` | datetime | 복습 일시 |
| `fromColumn` | enum | 이동 전 컬럼 |
| `toColumn` | enum | 이동 후 컬럼 |

### 3.6 시험 (Exam)

| 필드 | 타입 | 설명 |
|------|------|------|
| `id` | string | 고유 식별자 |
| `name` | string | 시험명 (예: "2학기 중간고사") |
| `date` | date | 시험 날짜 |
| `subjectIds` | string[] | 관련 과목 |

## 4. 칸반 보드

### 4.1 컬럼 구성 (5컬럼)

```
┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐
│ 오늘할것  │  │  3일후    │  │  1주후    │  │  1달후    │  │   완료   │
│          │  │          │  │          │  │          │  │          │
│ [카드]    │  │ [카드]    │  │ [카드]    │  │ [카드]    │  │ [카드]    │
│ [카드]    │  │          │  │ [카드]    │  │          │  │ [카드]    │
│ [카드]    │  │          │  │          │  │          │  │          │
└──────────┘  └──────────┘  └──────────┘  └──────────┘  └──────────┘
```

### 4.2 카드 플로우 (순환형)

```
사용자가 "완료" 클릭
        │
        ▼
현재 컬럼 확인 ─── "오늘할것" ──→ "3일후"로 이동 (nextReviewAt = now + 3일)
        │
        ├─── "3일후" ────────────→ "1주후"로 이동 (nextReviewAt = now + 7일)
        │
        ├─── "1주후" ────────────→ "1달후"로 이동 (nextReviewAt = now + 30일)
        │
        └─── "1달후" ────────────→ "완료"로 이동 (마스터됨)

시간 경과 체크 (앱 시작 시 + 주기적):
  - nextReviewAt이 지난 카드 → "오늘할것"으로 복귀
  - 시스템 토스트 알림 발송
```

### 4.3 보드 구조

- **과목별 개별 보드**: 과목 탭/사이드바로 전환하며 사용
- **전체 통합 뷰**: 모든 과목 카드를 한 보드에서 보되, 과목별 색상 구분 + 필터링 지원

## 5. 뷰 구성

### 5.1 칸반 뷰 (메인)

- 5컬럼 칸반 보드
- 드래그 앤 드롭으로 카드 이동 가능 (수동 이동도 허용)
- 카드에 과목 색상, 난이도, 중요도 뱃지 표시
- 과목별 필터, 난이도/중요도 필터
- 카드 클릭 시 상세 모달/사이드 패널

### 5.2 달력 뷰

- 월간/주간 달력
- 복습 예정일에 카드 표시
- 시험 D-day 표시
- 날짜별 학습 완료 카드 수 표시
- 날짜 클릭 시 해당일 학습 카드 목록

### 5.3 대시보드

#### 학습량 섹션
- **GitHub 스타일 기여도 그래프**: 날짜별 학습 카드 수를 히트맵으로 표시
- **오늘/이번주/이번달 학습 카드 수**: 숫자 카드
- **연속 학습 스트릭**: 현재 연속 일수 + 최대 기록
- **레벨/경험치**: 현재 레벨, 다음 레벨까지 경험치 프로그레스바

#### 성장 추이 섹션
- **과목별 숙련도 그래프**: 과목별 완료 비율 레이더 차트
- **취약 부분 히트맵**: 난이도 높음 + 반복 횟수 많은 토픽 강조
- **학습 패턴 분석**: 요일별/시간대별 학습 빈도 차트

### 5.4 타임라인 뷰

- **학습 이력 타임라인**: 시간순으로 학습/복습 이벤트 표시
- **시험 D-day 마커**: 타임라인 위에 시험일 표시
- **복습 예정일 마커**: 앞으로의 복습 스케줄 표시
- **과목별 필터링**: 특정 과목만 타임라인에 표시

## 6. LLM 연동

### 6.1 채팅 인터페이스

- 앱 내 채팅 패널 (사이드바 또는 모달)
- 사용자가 자연어로 요청: "수학 이차방정식 단원 카드 만들어줘"
- AI가 Subject > Unit > Topic 구조의 카드를 생성
- 생성된 카드 미리보기 → 사용자 확인 후 보드에 추가

### 6.2 API 설정

- 설정 화면에서 API 키 입력 (OpenAI / Anthropic)
- 모델 선택 옵션 (gpt-4o-mini, claude-3.5-sonnet 등)
- API 키는 로컬에 암호화 저장 (electron-store 등)

### 6.3 AI 기능 범위

- 과목/단원/토픽 구조 생성
- 카드의 체크리스트 항목 자동 생성
- 난이도/중요도 추천
- (향후 확장) 퀴즈 생성, 학습 조언

## 7. 동기부여 시스템

### 7.1 스트릭 (연속 기록)

- 하루 1개 이상 카드 학습 완료 시 스트릭 유지
- 현재 스트릭 일수 + 최대 기록 표시
- 스트릭 위험 알림 (오늘 아직 학습 안 했을 때)

### 7.2 레벨/경험치

| 행동 | 경험치 |
|------|--------|
| 카드 1개 학습 완료 | +10 XP |
| 일일 목표 달성 | +50 XP |
| 7일 스트릭 | +100 XP |
| 30일 스트릭 | +500 XP |
| 카드 "완료" 컬럼 도달 | +30 XP |

- 레벨업 시 시각적 효과 (배지, 간단한 애니메이션)
- 레벨 공식: `required_xp = level * 100`

### 7.3 통계/그래프

- 대시보드 섹션에 통합 (5.3 참조)

## 8. 스터디 타이머

### 8.1 뽀모도로 모드

- 기본 25분 집중 + 5분 휴식
- 4사이클 후 15분 장휴식
- 시간 커스터마이징 가능
- 타이머 완료 시 알림음

### 8.2 스톱워치 모드

- 시작/일시정지/정지 버튼
- 경과 시간 표시

### 8.3 공통

- 타이머 실행 중 현재 학습 카드와 연결
- 세션 종료 시 학습 시간 자동 기록
- 타이머는 앱 상단 또는 플로팅 위젯으로 항상 접근 가능

## 9. 알림 시스템

### 9.1 Windows 시스템 토스트

- 복습 카드가 "오늘할것"으로 복귀할 때
- 스트릭 위험 (당일 학습 미완료 시 저녁 알림)
- 시험 D-day 알림 (D-7, D-3, D-1)

### 9.2 앱 내 알림

- 트레이 아이콘 배지 (미처리 복습 카드 수)
- 앱 내 알림 센터 (알림 목록)

### 9.3 시스템 트레이

- 앱 닫기 시 시스템 트레이로 최소화
- 트레이 아이콘 우클릭 메뉴: 열기, 오늘 할 것 보기, 종료

## 10. 검색

- **전체 검색 (Ctrl+K)**: 모든 카드의 제목, 노트, 태그, 체크리스트를 대상으로 풀텍스트 검색
- **SQLite FTS5** 인덱스 활용
- 검색 결과에서 카드 클릭 시 해당 카드 상세로 이동
- 과목/난이도/중요도 필터와 조합 가능

## 11. 데이터 저장/동기화

### 11.1 로컬 저장 (기본)

- SQLite 파일 (`%APPDATA%/StudyLog/studylog.db`)
- 자동 백업: 일 1회 SQLite 파일 복사 (최근 7일 보관)
- JSON 내보내기/가져오기 기능

### 11.2 클라우드 동기화 (선택)

- Google 로그인 후 Firebase Firestore에 동기화
- 오프라인 우선 (Offline-first): 로컬에서 먼저 처리, 온라인 시 동기화
- 충돌 해결: 타임스탬프 기반 Last-Write-Wins
- 동기화 상태 표시 (동기화 중 / 완료 / 오류)

## 12. UI/UX 디자인

### 12.1 디자인 톤

- **GitHub 스타일**: 클린하고 전문적인 느낌
- **다크/라이트 테마** 전환 지원
- Ant Design 컴포넌트 기본 스타일에 커스텀 테마 적용
- 과목별 색상 코드 (사용자 지정 가능)

### 12.2 레이아웃

```
┌─────────────────────────────────────────────────────┐
│ 헤더: 앱 로고 | 검색(Ctrl+K) | 타이머 | 알림 | 설정 │
├──────────┬──────────────────────────────────────────┤
│          │                                          │
│ 사이드바  │          메인 콘텐츠 영역                 │
│          │                                          │
│ - 전체    │    (칸반 / 달력 / 대시보드 / 타임라인)     │
│ - 수학    │                                          │
│ - 영어    │                                          │
│ - 과학    │                                          │
│ - ...    │                                          │
│          │                                          │
│ + 과목    │                                          │
│   추가   │                                          │
│          │                                          │
│ ──────── │                                          │
│ AI 채팅   │                                          │
│ 시험관리  │                                          │
│ 설정      │                                          │
└──────────┴──────────────────────────────────────────┘
```

### 12.3 반응형

- 최소 창 크기: 1024x768
- 사이드바 접기/펼치기 지원
- 칸반 컬럼 가로 스크롤 (좁은 화면 대응)

## 13. 성능 요구사항

| 항목 | 목표 |
|------|------|
| 앱 시작 시간 | < 3초 |
| 카드 렌더링 | 1000개 카드에서도 60fps 스크롤 |
| 검색 응답 | < 200ms |
| DB 쿼리 | < 100ms |
| 메모리 사용 | < 300MB |

- 칸반 보드: 가상 스크롤 (react-window 등) 적용
- SQLite 쿼리 최적화: 인덱스 설계
- Electron main/renderer 프로세스 분리: DB 작업은 main에서

## 14. 보안

- API 키: electron-safeStorage 또는 keytar로 암호화 저장
- Google OAuth: PKCE 플로우
- 로컬 DB: 파일 시스템 권한으로 보호 (암호화는 v1에서 미적용)
- 클라우드: Firebase Security Rules로 사용자 데이터 격리

## 15. 향후 확장 고려사항 (v1에는 미포함)

- 모바일 컴패니언 앱
- AI 퀴즈 생성 및 자가 테스트
- 학습 그룹/공유 기능
- Ollama 로컬 LLM 지원
- 다중 사용자 프로필 (형제/자매 공유 PC)
- 플러그인 시스템
